<!doctype html>
<html lang="pt-BR" class="h-full">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Velas Arom√°ticas - Loja</title>
 <script src="https://cdn.tailwindcss.com"></script>
 <link rel="preconnect" href="https://fonts.googleapis.com">
 <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
 <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&amp;family=Jost:wght@300;400;500;600&amp;display=swap" rel="stylesheet">
 <style>
   body {
     box-sizing: border-box;
   }
  
   .font-display {
     font-family: 'Cormorant Garamond', serif;
   }
  
   .font-body {
     font-family: 'Jost', sans-serif;
   }
  
   .product-card {
     transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
   }
  
   .product-card:hover {
     transform: translateY(-8px);
   }
  
   .category-btn {
     transition: all 0.3s ease;
   }
  
   .category-btn.active {
     transform: scale(1.05);
   }
  
   .fade-in {
     animation: fadeIn 0.5s ease forwards;
   }
  
   @keyframes fadeIn {
     from { opacity: 0; transform: translateY(20px); }
     to { opacity: 1; transform: translateY(0); }
   }
  
   .stagger-1 { animation-delay: 0.1s; }
   .stagger-2 { animation-delay: 0.2s; }
   .stagger-3 { animation-delay: 0.3s; }
   .stagger-4 { animation-delay: 0.4s; }
  
   .cart-badge {
     animation: pulse 2s infinite;
   }
  
   @keyframes pulse {
     0%, 100% { transform: scale(1); }
     50% { transform: scale(1.1); }
   }
  
   .modal-overlay {
     backdrop-filter: blur(8px);
   }
  
   .toast {
     animation: slideIn 0.3s ease, slideOut 0.3s ease 2.7s forwards;
   }
  
   @keyframes slideIn {
     from { transform: translateY(100%); opacity: 0; }
     to { transform: translateY(0); opacity: 1; }
   }
  
   @keyframes slideOut {
     from { transform: translateY(0); opacity: 1; }
     to { transform: translateY(100%); opacity: 0; }
   }
  
   .gradient-bg {
     background: linear-gradient(135deg, #faf7f2 0%, #f5ede4 50%, #ebe3d7 100%);
   }
  
   .product-image {
     background: linear-gradient(145deg, #e8dfd3 0%, #d4c8b8 100%);
   }
  
   .banner-image {
     width: 100%;
     height: 100%;
     object-fit: cover;
   }
  
   ::-webkit-scrollbar {
     width: 6px;
   }
  
   ::-webkit-scrollbar-track {
     background: #f5ede4;
   }
  
   ::-webkit-scrollbar-thumb {
     background: #8b7355;
     border-radius: 3px;
   }
 </style>

 
</head>
<body class="h-full font-body gradient-bg text-stone-800 overflow-auto">
 <div id="app" class="min-h-full flex flex-col"><!-- Header -->
  <header class="sticky top-0 z-40 bg-white/80 backdrop-blur-md shadow-sm">
   <div class="max-w-7xl mx-auto px-4 py-4">
    <div class="flex items-center justify-between w-full">
     <div class="flex items-center gap-3">
      <div class="w-10 h-10 rounded-full overflow-hidden flex items-center justify-center bg-transparent">

       <a href="./" class="flex items-center gap-3">
  <div class="w-10 h-10 rounded-full overflow-hidden flex items-center justify-center">
    <img src="Black and White Minimalist Round Beauty And Spa Logo.jpg"
         alt="Mel Aromas"
         class="w-full h-full object-cover" />
  </div>

  <div>
    <h1 id="store-name" class="font-display text-xl md:text-2xl font-semibold text-stone-800"></h1>
    <p id="tagline" class="text-xs text-stone-500 font-light tracking-wide"></p>
  </div>
</a>


       <h1 id="store-name" class="font-display text-xl md:text-2xl font-semibold text-stone-800"></h1>
       <p id="tagline" class="text-xs text-stone-500 font-light tracking-wide"></p>
      </div>
     </div>
     <div class="flex items-center gap-3"><button id="search-btn" class="p-2 rounded-full hover:bg-stone-100 transition-colors">
       <svg class="w-5 h-5 text-stone-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
       </svg></button> <button id="favorites-btn" class="relative p-2 rounded-full hover:bg-stone-100 transition-colors">
       <svg class="w-5 h-5 text-stone-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
       </svg><span id="favorites-count" class="absolute -top-1 -right-1 w-5 h-5 bg-red-600 text-white text-xs rounded-full flex items-center justify-center hidden">0</span> </button> <button id="cart-btn" class="relative p-2 rounded-full hover:bg-stone-100 transition-colors">
       <svg class="w-5 h-5 text-stone-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
       </svg><span id="cart-count" class="absolute -top-1 -right-1 w-5 h-5 bg-amber-600 text-white text-xs rounded-full flex items-center justify-center cart-badge hidden">0</span> </button>
     </div>
    </div>
   </div><!-- Search Bar -->
   <div id="search-bar" class="hidden border-t border-stone-200 bg-white">
    <div class="max-w-7xl mx-auto px-4 py-3">
     <div class="relative"><input type="text" id="search-input" placeholder="Buscar produtos..." class="w-full pl-10 pr-4 py-2 bg-stone-50 border border-stone-200 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent">
      <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-stone-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
      </svg>
     </div>
    </div>
   </div>
  </header><!-- Main Content -->
  <main class="flex-1 max-w-7xl mx-auto w-full px-4 py-6"><!-- Hero Banner -->
   <section id="banner-section" class="mb-8 relative overflow-hidden rounded-2xl text-white p-6 md:p-10 bg-[url('download.jpg')] bg-cover bg-center
">
    <div class="relative z-10"><span class="inline-block px-3 py-1 bg-amber-500/20 text-amber-300 text-xs font-medium rounded-full mb-3">‚ú® Descubra nossos produtos ou personalize!</span>
     <h2 class="font-display text-2xl md:text-4xl font-semibold mb-2"></h2>
     <p class="text-stone-300 text-sm md:text-base mb-4 max-w-md"></p>
    </div>
   </section><!-- Categories -->
   <section class="mb-8">
    <div class="flex gap-2 overflow-x-auto pb-2"><button class="category-btn active flex-shrink-0 px-4 py-2 bg-stone-800 text-white text-sm font-medium rounded-full" data-category="velas"> Velas </button> <button class="category-btn flex-shrink-0 px-4 py-2 bg-white text-stone-600 text-sm font-medium rounded-full  border-stone-200 hover:border-amber-400 hover:text-white-200" data-category="homespray"> Home Spray </button> <button class="category-btn flex-shrink-0 px-4 py-2 bg-white text-stone-600 text-sm font-medium rounded-full border border-stone-200 hover:border-amber-400 hover:text-white-200" data-category="waxmelts"> Wax Melts </button> <button class="category-btn flex-shrink-0 px-4 py-2 bg-white text-stone-600 text-sm font-medium rounded-full border border-stone-200 hover:border-amber-400 hover:text-white-200" data-category="kits"> Kits </button>
    </div>
   </section><!-- Products Grid -->
   <section id="products-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6 mb-12"><!-- Products will be rendered here -->
   </section><!-- Kits Section - Only visible when kits category is selected -->
   <section id="kits-section" class="mb-12 hidden">
    <h2 class="font-display text-3xl font-semibold text-stone-800 mb-8">Escolha Seu Kit Personalizado</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><!-- Kit 1 -->
     <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow">
      <div class="w-full h-48 product-image flex items-center justify-center overflow-hidden"><img src="images/kitcompleto1.jpg" alt="Kit Completo Premium" loading="lazy" class="w-full h-full object-cover" onerror="console.error('Image failed to load:', this.src); this.parentElement.style.background='#e5e7eb'; this.style.display='none';">
      </div>
      <div class="p-6 text-center">
       <h3 class="font-display text-2xl font-semibold text-stone-800">Kit Completo Premium</h3>
       <p class="text-sm text-stone-600 mt-2">Vela 200g + Home Spray + Wax Melts</p>
      </div>
      <div class="p-6">
       <div class="mb-4 pb-4 border-b border-stone-100">
        <p class="text-sm font-medium text-stone-700 mb-3"> O que inclui:</p>
        <ul class="text-xs text-stone-600 space-y-2">
         <li>‚úì 1 Vela Arom√°tica 200g</li>
         <li>‚úì 1 Home Spray</li>
         <li>‚úì 1 Wax Melts</li>
        </ul>
       </div>
       <p class="font-display text-2xl font-semibold text-stone-800 mb-4">R$ 159,90</p><button class="kit-btn w-full py-3 bg-amber-600 hover:bg-amber-500 text-white font-medium rounded-full transition-colors"
        data-kit="3"
        data-image="images/kit3.jpg">
  Personalizar Kit
</button>

      </div>
     </div><!-- Kit 2 -->
     <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow">
      <div class="w-full h-48 product-image flex items-center justify-center overflow-hidden"><img src="images/kitessencial.jpg" alt="Kit Essencial" loading="lazy" class="w-full h-full object-cover" onerror="console.error('Image failed to load:', this.src); this.parentElement.style.background='#e5e7eb'; this.style.display='none';">
      </div>
      <div class="p-6 text-center">
       <h3 class="font-display text-2xl font-semibold text-stone-800">Kit Essencial</h3>
       <p class="text-sm text-stone-600 mt-2">Vela 200g + Home Spray</p>
      </div>
      <div class="p-6">
       <div class="mb-4 pb-4 border-b border-stone-100">
        <p class="text-sm font-medium text-stone-700 mb-3"> O que inclui:</p>
        <ul class="text-xs text-stone-600 space-y-2">
         <li>‚úì 1 Vela Arom√°tica 200g</li>
         <li>‚úì 1 Home Spray</li>
        </ul>
       </div>
       <p class="font-display text-2xl font-semibold text-stone-800 mb-4">R$ 129,90</p><button class="kit-btn w-full py-3 bg-amber-600 hover:bg-amber-500 text-white font-medium rounded-full transition-colors"
        data-kit="3"
        data-image="images/kit3.jpg">
  Personalizar Kit
</button>

      </div>
     </div><!-- Kit 3 -->
     <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow">
      <div class="w-full h-48 product-image flex items-center justify-center overflow-hidden"><img src="images/kit3.jpg" alt="Kit M√°ximo Aroma" loading="lazy" class="w-full h-full object-cover" onerror="console.error('Image failed to load:', this.src); this.parentElement.style.background='#e5e7eb'; this.style.display='none';">
      </div>
      <div class="p-6 text-center">
       <h3 class="font-display text-2xl font-semibold text-stone-800">Kit M√°ximo Aroma</h3>
       <p class="text-sm text-stone-600 mt-2">3 Velas 100g com Aromas Selecion√°veis</p>
      </div>
      <div class="p-6">
       <div class="mb-4 pb-4 border-b border-stone-100">
        <p class="text-sm font-medium text-stone-700 mb-3">O que inclui:</p>
        <ul class="text-xs text-stone-600 space-y-2">
         <li>‚úì 3 Velas Arom√°ticas 100g</li>
         <li>‚úì Escolha o aroma de cada uma!</li>
        </ul>
       </div>
       <p class="font-display text-2xl font-semibold text-stone-800 mb-4">R$ 124,90</p><button class="kit-btn w-full py-3 bg-amber-600 hover:bg-amber-500 text-white font-medium rounded-full transition-colors"
        data-kit="3"
        data-image="images/kit3.jpg">
  Personalizar Kit
</button>

      </div>
     </div><!-- Kit 4 -->
     <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow">
      <div class="w-full h-48 product-image flex items-center justify-center overflow-hidden"><img src="images/kit.png" alt="Kit Deluxe" loading="lazy" class="w-full h-full object-cover" onerror="console.error('Image failed to load:', this.src); this.parentElement.style.background='#e5e7eb'; this.style.display='none';">
      </div>
      <div class="p-6 text-center">
       <h3 class="font-display text-2xl font-semibold text-stone-800">Kit Deluxe</h3>
       <p class="text-sm text-stone-600 mt-2">1 Wax Melts + 1 Home Spray</p>
      </div>
      <div class="p-6">
       <div class="mb-4 pb-4 border-b border-stone-100">
        <p class="text-sm font-medium text-stone-700 mb-3"> O que inclui:</p>
        <ul class="text-xs text-stone-600 space-y-2">
         <li>‚úì 1 Wax Melts</li>
         <li>‚úì 1 Home Spray</li>
        </ul>
       </div>
       <p class="font-display text-2xl font-semibold text-stone-800 mb-4">R$ 89,90</p><button class="kit-btn w-full py-3 bg-amber-600 hover:bg-amber-500 text-white font-medium rounded-full transition-colors"
        data-kit="3"
        data-image="images/kit3.jpg">
  Personalizar Kit
</button>

      </div>
     </div>
    </div>
   </section>
  </main><!-- Footer -->
  <footer 
  class="text-white mt-auto bg-cover bg-center bg-no-repeat"
  style="background-image: url('download.jpg');"
>

   <div class="max-w-7xl mx-auto px-4 py-8">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
     <div>
      <h3 class="font-display text-xl text-white mb-3">Mel Aromas</h3>
      <p class="text-sm text-white">Produtos arom√°ticos artesanais feitos com ingredientes naturais e muito amor.</p>
     </div>
     <div>
      <h4 class="font-medium text-white mb-3">Contato</h4>
      <p class="text-sm text-white"> mel.aromas18@gmail.com</p>
      <p id="whatsapp-footer" class="text-sm text-white">5547996478284</p>
     </div>
     <div>
      <h4 class="font-medium text-white mb-3">Instagram</h4>
      <div class="flex gap-3">
  <a id="instagram-link" href="https://www.instagram.com/aromas.mel/" target="_blank" rel="noopener noreferrer"
     class="w-10 h-10  flex items-center justify-center hover:bg-white/40 transition-colors cursor-pointer">
    <img src="instagram.png" alt="Instagram" class="w-5 h-5" />
  </a>
</div>
     </div>
    </div>
    <div class="border-t border-white/20 pt-6 text-center">
     <p id="footer-text" class="text-xs text-white"></p>
    </div>
   </div>
  </footer><!-- Product Modal -->
  <div id="product-modal" class="fixed inset-0 z-50 hidden">
   <div class="modal-overlay absolute inset-0 bg-black/50" id="modal-overlay"></div>
   <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-full md:max-w-lg bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-full">
    <div class="relative">
     <div id="modal-image" class="w-full h-64 product-image flex items-center justify-center"><span class="text-6xl"></span>
     </div><button id="close-modal" class="absolute top-4 right-4 w-8 h-8 bg-white/90 rounded-full flex items-center justify-center shadow-lg hover:bg-white transition-colors">
      <svg class="w-4 h-4 text-stone-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg></button>
    </div>
    <div class="p-6 overflow-y-auto flex-1">
     <div class="flex items-start justify-between mb-3">
      <div><span id="modal-category" class="text-xs text-amber-600 font-medium">Velas</span>
       <h3 id="modal-title" class="font-display text-2xl font-semibold text-stone-800">Vela Lavanda</h3>
      </div><button id="favorite-btn" class="p-2 rounded-full hover:bg-stone-100 transition-colors">
       <svg class="w-5 h-5 text-stone-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
       </svg></button>
     </div>
     <div id="modal-description" class="text-stone-500 text-sm mb-4 leading-relaxed">
      Uma vela artesanal com aroma relaxante de lavanda, perfeita para momentos de medita√ß√£o e relaxamento.
     </div>
     </div>
     <div id="vela-weight-section" class="mb-6 hidden px-6">
      <p class="text-sm font-medium text-stone-700 mb-2">Tamanho da Vela</p>
      <div class="flex gap-2"><button id="weight-220" class="flex-1 py-2 px-3 border border-stone-200 bg-amber-50 border-amber-600 rounded-lg text-sm font-medium text-stone-800 transition-colors">200g</button>
      </div>
     </div>
     <div id="homespray-size-section" class="mb-6 hidden px-6">
      <p class="text-sm font-medium text-stone-700 mb-2">Volume do Home Spray</p>
      <div class="flex gap-2"><button id="size-210ml" class="flex-1 py-2 px-3 border border-stone-200 bg-amber-50 border-amber-600 rounded-lg text-sm font-medium text-stone-800 transition-colors">210ml</button>
      </div>
     </div>
     <div id="waxmelts-size-section" class="mb-6 hidden px-6">
      <p class="text-sm font-medium text-stone-700 mb-2">Peso do Wax Melts</p>
      <div class="flex gap-2"><button id="size-75g" class="flex-1 py-2 px-3 border border-stone-200 bg-amber-50 border-amber-600 rounded-lg text-sm font-medium text-stone-800 transition-colors">75g</button>
      </div>
     </div>
     <div class="flex flex-wrap gap-2 mb-6 px-6"><span class="px-3 py-1 bg-stone-100 text-stone-600 text-xs rounded-full">Natural</span> <span class="px-3 py-1 bg-stone-100 text-stone-600 text-xs rounded-full">Cruelty-free</span> <span class="px-3 py-1 bg-stone-100 text-stone-600 text-xs rounded-full">Sustent√°vel</span>
     </div>
    <div class="flex items-center justify-between pt-6 pb-6 px-6 border-t border-stone-100">

      <div><span class="text-xs text-stone-400">Pre√ßo</span>
       <p id="modal-price" class="font-display text-2xl font-semibold text-stone-800">R$ 89,90</p>
      </div>
      <div class="flex items-center gap-2">
       <div class="flex items-center border border-stone-200 rounded-full"><button id="qty-decrease" class="w-8 h-8 flex items-center justify-center text-stone-600 hover:bg-stone-100 rounded-l-full transition-colors">-</button> <span id="qty-value" class="w-8 text-center text-sm font-medium">1</span> <button id="qty-increase" class="w-8 h-8 flex items-center justify-center text-stone-600 hover:bg-stone-100 rounded-r-full transition-colors">+</button>
       </div><button id="add-to-cart-btn" class="px-6 py-2 bg-amber-600 hover:bg-amber-500 text-white font-medium rounded-full transition-colors"> Adicionar </button>
      </div>
     </div>
    </div>
   </div>
  </div><!-- Favorites Modal -->
  <div id="favorites-modal" class="fixed inset-0 z-50 hidden">
   <div class="modal-overlay absolute inset-0 bg-black/50" id="favorites-overlay"></div>
   <div class="absolute right-0 top-0 h-full w-full max-w-md bg-white shadow-2xl flex flex-col">
    <div class="p-6 border-b border-stone-100 flex items-center justify-between">
     <h3 class="font-display text-xl font-semibold text-stone-800">Favoritos</h3><button id="close-favorites" class="p-2 rounded-full hover:bg-stone-100 transition-colors">
      <svg class="w-5 h-5 text-stone-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg></button>
    </div>
    <div id="favorites-items" class="flex-1 overflow-y-auto p-6"><!-- Favorites items will be rendered here -->
    </div>
   </div>
  </div><!-- Cart Modal -->
  <div id="cart-modal" class="fixed inset-0 z-50 hidden">
   <div class="modal-overlay absolute inset-0 bg-black/50" id="cart-overlay"></div>
   <div class="absolute right-0 top-0 h-full w-full max-w-md bg-white shadow-2xl flex flex-col">
    <div class="p-6 border-b border-stone-100 flex items-center justify-between">
     <h3 class="font-display text-xl font-semibold text-stone-800">Seu Carrinho</h3><button id="close-cart" class="p-2 rounded-full hover:bg-stone-100 transition-colors">
      <svg class="w-5 h-5 text-stone-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg></button>
    </div>
    <div id="cart-items" class="flex-1 overflow-y-auto p-6"><!-- Cart items will be rendered here -->
    </div>
    <div class="p-6 border-t border-stone-100 bg-stone-50">
     <div class="flex items-center justify-between mb-4"><span class="text-stone-600">Subtotal (sem frete)</span> <span id="cart-subtotal" class="font-display text-xl font-semibold text-stone-800">R$ 0,00</span>
     </div><button id="send-whatsapp-btn" class="w-full py-3 bg-green-600 hover:bg-green-500 text-white font-medium rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2">
      <svg class="w-5 h-5" fill="currentColor" viewbox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.272-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.076 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421-7.403h-.004a9.87 9.87 0 00-5.031 1.378c-3.055 2.116-4.922 5.488-4.922 9.52 0 5.61 4.562 10.155 10.148 10.155h.008c1.747 0 3.47-.379 5.149-1.13l5.823 1.604c.996.272 1.896-.494 1.752-1.489l-1.286-6.465a10.08 10.08 0 001.53-5.2c0-5.593-4.562-10.15-10.148-10.15z" />
      </svg> Enviar Pedido </button>
    </div>
   </div>

 
  

<!-- Delivery Modal (Dados de Entrega) -->
<div id="delivery-modal" class="fixed inset-0 z-50 hidden">
  <div id="delivery-overlay" class="modal-overlay absolute inset-0 bg-black/50"></div>

  <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-full md:max-w-lg bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-full">
    <div class="p-6 border-b border-stone-100 flex items-center justify-between">
      <h3 class="font-display text-2xl font-semibold text-stone-800">Dados de Entrega</h3>
      <button id="close-delivery" class="p-2 rounded-full hover:bg-stone-100 transition-colors">
        <svg class="w-5 h-5 text-stone-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>

    <div class="p-6 overflow-y-auto flex-1 space-y-4">
  <div>
    <label class="block text-sm font-medium text-stone-700 mb-2">Nome Completo *</label>
    <input id="delivery-name" type="text" placeholder="Seu nome completo"
           class="w-full px-4 py-3 bg-white border border-stone-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-amber-500">
  </div>

  <div>
    <label class="block text-sm font-medium text-stone-700 mb-2">Telefone/WhatsApp *</label>
    <input id="delivery-phone" type="tel" placeholder="(11) 99999-9999"
           class="w-full px-4 py-3 bg-white border border-stone-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-amber-500">
  </div>

  <div>
    <label class="block text-sm font-medium text-stone-700 mb-2">CEP *</label>
    <input id="delivery-cep" type="text" placeholder="00000-000"
           class="w-full px-4 py-3 bg-white border border-stone-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-amber-500">
  </div>

  <div>
    <label class="block text-sm font-medium text-stone-700 mb-2">N√∫mero *</label>
    <input id="delivery-number" type="text" placeholder="Ex: 123"
           class="w-full px-4 py-3 bg-white border border-stone-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-amber-500">
  </div>

  <div>
    <label class="block text-sm font-medium text-stone-700 mb-2">Refer√™ncia (Opcional)</label>
    <input id="delivery-ref" type="text" placeholder="Ex: Perto da padaria, apartamento fundos"
           class="w-full px-4 py-3 bg-white border border-stone-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-amber-500">
  </div>

  <div>
    <label class="block text-sm font-medium text-stone-700 mb-2">Observa√ß√µes (Opcional)</label>
    <textarea id="delivery-notes" rows="4" placeholder="Ex: Prefer√™ncia de hor√°rio, instru√ß√µes especiais, etc."
              class="w-full px-4 py-3 bg-white border border-stone-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-amber-500"></textarea>
  </div>

  <!-- Forma de Pagamento (AGORA NO FINAL) -->
  <div class="pt-2">
    <h3 class="text-sm font-semibold text-gray-800">Forma de Pagamento <span class="text-red-500">*</span></h3>

    <div class="mt-2 rounded-xl border border-amber-200 bg-amber-50 p-3">
      <p class="text-xs text-amber-900 leading-relaxed">
        <strong>Aten√ß√£o:</strong> o pagamento √© combinado e realizado via <strong>WhatsApp</strong>.
        Este cat√°logo <strong>n√£o</strong> processa pagamentos.
      </p>
    </div>

    <div class="mt-3 space-y-3">
      <div>
        <input type="radio" id="pay_pix" name="payment_method" value="pix" class="peer hidden" required />
        <label for="pay_pix"
          class="flex cursor-pointer items-start justify-between gap-3 rounded-2xl border border-gray-200 bg-white p-4
                 transition hover:border-gray-300 peer-checked:border-green-600 peer-checked:bg-green-50">
          <div class="min-w-0">
            <p class="text-sm font-semibold text-gray-900 peer-checked:text-green-700">Pix</p>
            <p class="mt-1 text-xs text-gray-500">Pagamento via WhatsApp (enviaremos a chave/QR Code).</p>
          </div>
          <span class="mt-0.5 inline-flex h-5 w-5 flex-none items-center justify-center rounded-full border border-gray-300
                       peer-checked:border-green-600 peer-checked:bg-green-600" aria-hidden="true">
            <span class="h-2 w-2 rounded-full bg-white opacity-0 peer-checked:opacity-100"></span>
          </span>
        </label>
      </div>

      <div>
        <input type="radio" id="pay_credit" name="payment_method" value="cartao_credito" class="peer hidden" required />
        <label for="pay_credit"
          class="flex cursor-pointer items-start justify-between gap-3 rounded-2xl border border-gray-200 bg-white p-4
                 transition hover:border-gray-300 peer-checked:border-green-600 peer-checked:bg-green-50">
          <div class="min-w-0">
            <p class="text-sm font-semibold text-gray-900 peer-checked:text-green-700">Cart√£o de Cr√©dito</p>
            <p class="mt-1 text-xs text-gray-500">Via <strong>link de pagamento</strong> no WhatsApp <strong>+ taxa da maquininha</strong>.</p>
          </div>
          <span class="mt-0.5 inline-flex h-5 w-5 flex-none items-center justify-center rounded-full border border-gray-300
                       peer-checked:border-green-600 peer-checked:bg-green-600" aria-hidden="true">
            <span class="h-2 w-2 rounded-full bg-white opacity-0 peer-checked:opacity-100"></span>
          </span>
        </label>
      </div>

      <div>
        <input type="radio" id="pay_debit" name="payment_method" value="cartao_debito" class="peer hidden" required />
        <label for="pay_debit"
          class="flex cursor-pointer items-start justify-between gap-3 rounded-2xl border border-gray-200 bg-white p-4
                 transition hover:border-gray-300 peer-checked:border-green-600 peer-checked:bg-green-50">
          <div class="min-w-0">
            <p class="text-sm font-semibold text-gray-900 peer-checked:text-green-700">Cart√£o de D√©bito</p>
            <p class="mt-1 text-xs text-gray-500">Via <strong>link de pagamento</strong> no WhatsApp <strong>+ taxa da maquininha</strong>.</p>
          </div>
          <span class="mt-0.5 inline-flex h-5 w-5 flex-none items-center justify-center rounded-full border border-gray-300
                       peer-checked:border-green-600 peer-checked:bg-green-600" aria-hidden="true">
            <span class="h-2 w-2 rounded-full bg-white opacity-0 peer-checked:opacity-100"></span>
          </span>
        </label>
      </div>
    </div>
  </div>
</div>


    <div class="p-6 border-t border-stone-100 bg-white flex gap-4">
      <button id="cancel-delivery" class="flex-1 py-3 bg-stone-200 hover:bg-stone-300 text-stone-800 font-medium rounded-full transition-colors">
        Cancelar
      </button>

      <button id="confirm-delivery" class="flex-1 py-3 bg-green-600 hover:bg-green-500 text-white font-medium rounded-full transition-colors flex items-center justify-center gap-2">
        Enviar Pedido
      </button>
    </div>
  </div>
</div>




  </div><!-- Kit Customization Modal -->
  <div id="kit-modal" class="fixed inset-0 z-50 hidden">
   <div class="modal-overlay absolute inset-0 bg-black/50" id="kit-overlay"></div>
   <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-full md:max-w-2xl bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-full">
    <div class="p-6 border-b border-stone-100 flex items-center justify-between sticky top-0 bg-white">
     <h3 id="kit-title" class="font-display text-2xl font-semibold text-stone-800">Personalize Seu Kit</h3><button id="close-kit-modal" class="p-2 rounded-full hover:bg-stone-100 transition-colors">
      <svg class="w-5 h-5 text-stone-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg></button>
    </div>
    <div id="kit-items-container" class="overflow-y-auto flex-1 p-6"><!-- Kit items will be rendered here -->
    </div>
    <div class="p-6 border-t border-stone-100 bg-stone-50 sticky bottom-0">
     <div class="flex items-center justify-between mb-4"><span class="text-stone-600 font-medium">Total do Kit</span> <span id="kit-total-price" class="font-display text-2xl font-semibold text-stone-800">R$ 0,00</span>
     </div><button id="add-kit-to-cart" class="w-full py-3 bg-amber-600 hover:bg-amber-500 text-white font-medium rounded-full transition-colors"> Adicionar Kit ao Carrinho </button>
    </div>
   </div>
  </div><!-- Toast Container -->
  <div id="toast-container" class="fixed bottom-20 left-4 right-4 z-50 flex flex-col gap-2 items-center pointer-events-none"></div>
 </div>
 <div id="delivery-modal" class="fixed inset-0 z-50 hidden">
  ...
</div>





 <script>
 
 
   const aromas = ["Baunilha", "Cascas e Folhas", "Cereja e Avel√£", "Ch√° Branco", "Lavanda"];
  
   const products = [
     // VELAS AROM√ÅTICAS
     {
       id: 1,
       name: "Vela Baunilha",
       category: "velas",
       price: 79.90,
       imageUrl: "images/baunilha2op.png",
       description: "Feita com cera de coco 100% vegetal. Doce e acolhedora, a baunilha cria uma sensa√ß√£o de aconchego que transforma qualquer ambiente.",
       
     },
     {
       id: 2,
       name: "Vela Cascas e Folhas",
       category: "velas",
       price: 79.90,
       imageUrl: "images/cascas.png",
       description: "Feita com cera de coco 100% vegetal. Fresco e natural, preenche o ambiente aos poucos com notas verdes que remetem √† natureza viva.",
       
     },
     {
       id: 3,
       name: "Vela Cereja e Avel√£",
       category: "velas",
       price: 79.90,
       imageUrl: "images/cereja.png",
       description: "Feita com cera de coco 100% vegetal. Doce e sofisticada, essa combina√ß√£o envolve o ambiente com um aroma quente e marcante.",
      
     },
     {
       id: 14,
       name: "Vela Ch√° Branco",
       category: "velas",
       price: 79.90,
       imageUrl: "images/chabranco.png",
       description: "Feita com cera de coco 100% vegetal. Delicada e elegante, cria uma atmosfera leve, limpa e sofisticada.",
       
     },
     {
       id: 15,
       name: "Vela Lavanda",
       category: "velas",
       price: 79.90,
       imageUrl: "images/lavanda.png",
       description: "Feita com cera de coco 100% vegetal. Um aroma suave e relaxante que envolve o ambiente lentamente, criando uma atmosfera de calma e conforto.",
       
     },
    
     // HOME SPRAY
     {
       id: 4,
       name: "Home Spray Ch√° Branco",
       category: "homespray",
       price: 64.90,
       imageUrl: "images/chabrancohome.png",
       description: "Refresca o ambiente instantaneamente com um perfume suave e equilibrado.",
       
     },
     {
       id: 5,
       name: "Home Spray Lavanda",
       category: "homespray",
       price: 64.90,
       imageUrl: "images/lavandahome.png",
       description: "Refresca o espa√ßo instantaneamente com uma fragr√¢ncia leve que transmite tranquilidade e bem-estar.",
      
     },
     {
       id: 6,
       name: "Home Spray Baunilha",
       category: "homespray",
       price: 64.90,
       imageUrl: "images/baunilhahome.png",
       description: "Perfuma o espa√ßo rapidamente com um toque adocicado e envolvente, trazendo conforto imediato.",
       
     },
     {
       id: 10,
       name: "Home Spray Cascas e Folhas",
       category: "homespray",
       price: 64.90,
       imageUrl: "images/cascashome.png",
       description: "Renova o ar instantaneamente com um aroma limpo, leve e equilibrado.",
      
     },
     {
       id: 11,
       name: "Home Spray Cereja e Avel√£",
       category: "homespray",
       price: 64.90,
       imageUrl: "images/cerejahome.png",
       description: "Perfuma o espa√ßo de forma imediata com notas adocicadas e levemente cremosas.",
       
     },
    
     // WAX MELTS
     {
       id: 7,
       name: "Wax Melts Cascas e Folhas",
       category: "waxmelts",
       price: 34.90,
       imageUrl: "images/cascaswax.png",
       description: "Feitos com um mix de cera de coco e cera de palma. Difus√£o marcante de notas verdes e frescas, perfeita para ambientes que pedem leveza e frescor.",
       
     },
     {
       id: 8,
       name: "Wax Melts Cereja e Avel√£",
       category: "waxmelts",
       price: 34.90,
       imageUrl: "images/CEREJAWAX.png",
       description: "Feitos com um mix de cera de coco e cera de palma. Aroma intenso e envolvente que destaca a do√ßura da cereja com o toque aconchegante da avel√£.",
       
     },
     {
       id: 9,
       name: "Wax Melts Ch√° Branco",
       category: "waxmelts",
       price: 34.90,
       imageUrl: "images/chawax.png",
       description: "Feitos com um mix de cera de coco e cera de palma. Libera o aroma de ch√° branco de forma cont√≠nua, trazendo sensa√ß√£o de frescor e serenidade.",
       
     },
     {
       id: 12,
       name: "Wax Melts Baunilha",
       category: "waxmelts",
       price: 34.90,
       imageUrl: "images/baunilhawax.png",
       description: "Feitos com um mix de cera de coco e cera de palma. Uma explos√£o cremosa de baunilha que perfuma intensamente e aquece o ambiente.",
       
     },
     {
       id: 13,
       name: "Wax Melts Lavanda",
       category: "waxmelts",
       price: 34.90,
       imageUrl: "images/lavandawax.png",
       description: "Feitos com um mix de cera de coco e cera de palma. Libera o aroma de lavanda de forma intensa e cont√≠nua, ideal para momentos de descanso e relaxamento.",
     
     }
   ];


   let cart = [];
   let currentCategory = 'velas';
   let currentProduct = null;
   let quantity = 1;
   let selectedVelaWeight = '200g';
   let selectedHomeSpraySize = '210ml';
   let selectedWaxMeltsSize = '75g';
   let favorites = new Set();
   let whatsappNumber = '5547996478284';
   let selectedKit = null;
   let kitCustomizations = {};
   let selectedKitImage = "";


   // Kit configurations
   const kitConfigs = {
     1: {
       name: 'Kit Completo Premium',
      imageUrl: "images/kitcompleto1.jpg",
       price: 159.90,
       items: [
         { type: 'vela', quantity: 1, size: '200g' },
         { type: 'homespray', quantity: 1, size: '210ml' },
         { type: 'waxmelts', quantity: 1, size: '75g' }
       ]
     },
     2: {
       name: 'Kit Essencial',
       imageUrl: "images/kitessencial.jpg",
       price: 129.90,
       items: [
         { type: 'vela', quantity: 1, size: '200g' },
         { type: 'homespray', quantity: 1, size: '210ml' }
       ]
     },
     3: {
       name: 'Kit M√°ximo Aroma',
       price: 124.90,
       items: [
         { type: 'vela', quantity: 3, size: '100g' }
       ]
     },
     4: {
       name: 'Kit Deluxe',
       price: 89.90,
       items: [
         { type: 'waxmelts', quantity: 1, size: '75g' },
         { type: 'homespray', quantity: 1, size: '210ml' }
       ]
     }
   };


   const defaultConfig = {
     store_name: "Velas Arom√°ticas",
     tagline: "Aromas que transformam",
     banner_image_url: "Banner.jpg",
     whatsapp_number: "47996478284",
     footer_text: "¬© 2024 Velas Arom√°ticas. Todos os direitos reservados.",
     background_color: "#faf7f2",
     surface_color: "#ffffff",
     text_color: "#44403c",
     primary_action_color: "#d97706",
     secondary_action_color: "#78716c",
     font_family: "Jost",
     font_size: 16
   };


   let config = { ...defaultConfig };


   const productsGrid = document.getElementById('products-grid');
   const productModal = document.getElementById('product-modal');
   const cartModal = document.getElementById('cart-modal');
   const searchBar = document.getElementById('search-bar');
   const searchInput = document.getElementById('search-input');
   const cartCount = document.getElementById('cart-count');
   const cartItems = document.getElementById('cart-items');
   const cartSubtotal = document.getElementById('cart-subtotal');
   const toastContainer = document.getElementById('toast-container');


   function formatPrice(price) {
     return price.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
   }


   function updateFavoritesUI() {
     const favoriteCount = favorites.size;
     const countBadge = document.getElementById('favorites-count');
    
     if (favoriteCount > 0) {
       countBadge.textContent = favoriteCount;
       countBadge.classList.remove('hidden');
     } else {
       countBadge.classList.add('hidden');
     }


     // Update favorites list
     const favoritesList = document.getElementById('favorites-items');
    
     if (favorites.size === 0) {
       favoritesList.innerHTML = `
         <div class="flex flex-col items-center justify-center h-full text-center">
           <span class="text-6xl mb-4">üíî</span>
           <p class="text-stone-500">Nenhum favorito ainda</p>
           <p class="text-sm text-stone-400">Adicione produtos aos favoritos</p>
         </div>
       `;
     } else {
       const favoriteProducts = products.filter(p => favorites.has(p.id));
      
       favoritesList.innerHTML = favoriteProducts.map(product => `
         <div class="flex gap-4 mb-4 pb-4 border-b border-stone-100">
           <div class="w-16 h-16 product-image rounded-xl flex items-center justify-center flex-shrink-0 overflow-hidden cursor-pointer hover:scale-110 transition-transform" data-product-id="${product.id}">
             <img src="${product.imageUrl || ''}" alt="${product.name}" loading="lazy" class="w-full h-full object-cover" onerror="console.error('Image failed to load:', this.src); this.parentElement.style.background='#e5e7eb'; this.style.display='none';">
           </div>
           <div class="flex-1">
             <h4 class="font-medium text-stone-800 mb-1">${product.name}</h4>
             <p class="text-xs text-stone-600 mb-2 line-clamp-2">${product.description}</p>
             <p class="text-sm text-amber-600 font-semibold">${formatPrice(product.price)}</p>
             <div class="flex gap-2 mt-2">
               <button class="favorite-add-btn flex-1 py-1 px-2 bg-amber-600 hover:bg-amber-500 text-white text-xs font-medium rounded transition-colors" data-id="${product.id}">
                 Adicionar
               </button>
               <button class="favorite-remove-btn py-1 px-2 text-red-500 hover:bg-red-50 text-xs font-medium rounded transition-colors border border-red-200" data-id="${product.id}">
                 ‚úï
               </button>
             </div>
           </div>
         </div>
       `).join('');


       // Add event listeners
       document.querySelectorAll('.favorite-add-btn').forEach(btn => {
         btn.addEventListener('click', () => {
           const productId = parseInt(btn.dataset.id);
           const product = products.find(p => p.id === productId);
           addToCart(product, 1);
           closeFavorites();
         });
       });


       document.querySelectorAll('.favorite-remove-btn').forEach(btn => {
         btn.addEventListener('click', () => {
           const productId = parseInt(btn.dataset.id);
           toggleFavorite(productId);
         });
       });


       document.querySelectorAll('[data-product-id]').forEach(el => {
         el.addEventListener('click', () => {
           const productId = parseInt(el.dataset.productId);
           closeFavorites();
           openProductModal(productId);
         });
       });
     }
   }


   function openFavorites() {
     document.getElementById('favorites-modal').classList.remove('hidden');
     document.body.style.overflow = 'hidden';
     updateFavoritesUI();
   }


   function closeFavorites() {
     document.getElementById('favorites-modal').classList.add('hidden');
     document.body.style.overflow = '';
   }


   function showToast(message, type = 'success') {
     const toast = document.createElement('div');
     toast.className = `toast px-4 py-3 rounded-full shadow-lg text-sm font-medium ${type === 'success' ? 'bg-green-600 text-white' : 'bg-red-600 text-white'}`;
     toast.textContent = message;
     toastContainer.appendChild(toast);
     setTimeout(() => toast.remove(), 3000);
   }


   function updateBannerImage(imageUrl) {
     const bannerImage = document.getElementById('banner-image');
     const bannerFallback = document.getElementById('banner-fallback');
    
     if (imageUrl && imageUrl.trim()) {
       bannerImage.src = imageUrl;
       bannerImage.classList.remove('hidden');
       bannerFallback.style.display = 'none';
     } else {
       bannerImage.classList.add('hidden');
       bannerFallback.style.display = 'block';
     }
   }


   function renderProducts(category = 'all', search = '') {
     let filtered = products;
    
     // Filtrar APENAS pela categoria exata solicitada
     if (category !== 'all') {
       filtered = filtered.filter(p => p.category === category);
     }
    
     // Se houver busca, filtrar dentro da categoria j√° filtrada
     if (search) {
       const searchLower = search.toLowerCase();
       filtered = filtered.filter(p =>
         p.name.toLowerCase().includes(searchLower) ||
         p.description.toLowerCase().includes(searchLower)
       );
     }


     let html = filtered.map((product, index) => `
       <div class="product-card bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl cursor-pointer fade-in stagger-${(index % 4) + 1}" data-id="${product.id}" style="opacity: 0;">
         <div class="relative">
           <div class="product-image aspect-square flex items-center justify-center overflow-hidden">
             <img src="${product.imageUrl || ''}" alt="${product.name}" loading="lazy" class="w-full h-full object-cover" onerror="this.parentElement.style.background='#e5e7eb'; this.style.display='none'; this.alt='Imagem n√£o carregada';">
           </div>
           <button class="favorite-toggle absolute top-3 right-3 w-8 h-8 bg-white/90 rounded-full flex items-center justify-center shadow-md hover:scale-110 transition-transform" data-id="${product.id}">
             <svg class="w-4 h-4 ${favorites.has(product.id) ? 'text-red-500 fill-red-500' : 'text-stone-400'}" fill="${favorites.has(product.id) ? 'currentColor' : 'none'}" stroke="currentColor" viewBox="0 0 24 24">
               <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
             </svg>
           </button>
         </div>
         <div class="p-4">
           <span class="text-xs text-amber-600 font-medium capitalize">${product.category === 'velas' ? ' Vela' : product.category === 'homespray' ? 'Home Spray' : 'Wax Melts'}</span>
           <h3 class="font-display text-lg font-semibold text-stone-800 mb-1">${product.name}</h3>
           <div class="flex items-center justify-between gap-2">
             <p class="font-display text-lg font-semibold text-stone-800">${formatPrice(product.price)}</p>
             <div class="flex gap-2">
               <button class="info-btn w-8 h-8 bg-stone-200 hover:bg-stone-300 text-stone-600 rounded-full flex items-center justify-center transition-colors" data-id="${product.id}">
                 <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                   <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                 </svg>
               </button>
               <button class="quick-add w-8 h-8 bg-amber-600 hover:bg-amber-500 text-white rounded-full flex items-center justify-center transition-colors" data-id="${product.id}">
                 <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                   <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                 </svg>
               </button>
             </div>
           </div>
         </div>
       </div>
     `).join('');


     // Adicionar card de personaliza√ß√£o apenas na categoria de velas
     if (category === 'velas' || (category === 'all' && !search)) {
       const customCardIndex = filtered.length;
       html += `
         <div class="product-card bg-gradient-to-br from-purple-50 to-indigo-50 rounded-2xl overflow-hidden shadow-sm hover:shadow-xl cursor-pointer fade-in stagger-${(customCardIndex % 4) + 1} border-2 border-purple-200" style="opacity: 0;">
           <div class="product-image aspect-square relative overflow-hidden">
 <div class="product-image aspect-square relative overflow-hidden bg-white">
  <img 
    src="./postp.jpg"
    class="w-full h-full object-contain"
    alt="Personalizar vela"
  />
</div>


           </div>
           <div class="p-4">
             <span class="text-xs text-purple-600 font-medium"> Personalizado</span>
             <h3 class="font-display text-lg font-semibold text-stone-800 mb-1">Personalizar Vela</h3>
             <p class="text-xs text-stone-600 mb-3 line-clamp-2">Crie sua vela sob medida! Escolha aroma, tamanho, quantidade e receba um or√ßamento exclusivo. Ideal para presentes e eventos especiais.</p>
             <button class="custom-vela-btn w-full py-2 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-full transition-colors text-sm flex items-center justify-center gap-2">
               <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1m2-1v2.5M12 21v-9M2 12l2 1m-2-1l2-1m-2 1v2.5m16-4l2 1m-2-1l2-1m-2 1v2.5"/>
               </svg>
               Solicitar Or√ßamento
             </button>
           </div>
         </div>
       `;
     }


     productsGrid.innerHTML = html;


     document.querySelectorAll('.product-card:not(:has(.custom-vela-btn))').forEach(card => {
       card.addEventListener('click', (e) => {
         if (!e.target.closest('.favorite-toggle') && !e.target.closest('.quick-add')) {
           openProductModal(parseInt(card.dataset.id));
         }
       });
     });


     document.querySelectorAll('.favorite-toggle').forEach(btn => {
       btn.addEventListener('click', (e) => {
         e.stopPropagation();
         toggleFavorite(parseInt(btn.dataset.id));
       });
     });


     document.querySelectorAll('.quick-add').forEach(btn => {
       btn.addEventListener('click', (e) => {
         e.stopPropagation();
         const product = products.find(p => p.id === parseInt(btn.dataset.id));
         addToCart(product, 1);
       });
     });


     document.querySelectorAll('.info-btn').forEach(btn => {
       btn.addEventListener('click', (e) => {
         e.stopPropagation();
         const productId = parseInt(btn.dataset.id);
         openProductModal(productId);
       });
     });


     // Custom vela button
     document.querySelectorAll('.custom-vela-btn').forEach(btn => {
       btn.addEventListener('click', () => {
         const message = encodeURIComponent(`Ol√°!  Gostaria de solicitar um or√ßamento para velas personalizadas. Gostaria de saber mais sobre:\n\n Aromas dispon√≠veis\n Tamanhos/Quantidades\n Valores e descontos\n Op√ß√µes de embalagem\n Prazos de entrega\n\nPodemos conversar sobre essas op√ß√µes?`);
         const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${message}`;
         window.open(whatsappUrl, '_blank');
         showToast('Abrindo WhatsApp... ');
       });
     });
   }


   function toggleFavorite(productId) {
     if (favorites.has(productId)) {
       favorites.delete(productId);
       showToast('Removido dos favoritos');
     } else {
       favorites.add(productId);
       showToast('Adicionado aos favoritos ‚ù§Ô∏è');
     }
     renderProducts(currentCategory, searchInput.value);
     updateFavoritesUI();
   }


   function openProductModal(productId) {
     currentProduct = products.find(p => p.id === productId);
     quantity = 1;
     selectedVelaWeight = '200g';
     selectedHomeSpraySize = '210ml';
     selectedWaxMeltsSize = '75g';
    
     document.getElementById('modal-image').innerHTML = `<img src="${currentProduct.imageUrl || ''}" alt="${currentProduct.name}" loading="lazy" class="w-full h-full object-cover" onerror="console.error('Image failed to load:', this.src); this.parentElement.style.background='#e5e7eb'; this.style.display='none';">`;
     document.getElementById('modal-category').textContent = currentProduct.category === 'velas' ? 'Vela Arom√°tica' : currentProduct.category === 'homespray' ? 'Home Spray' : 'Wax Melts';
     document.getElementById('modal-title').textContent = currentProduct.name;
     document.getElementById('modal-description').textContent = currentProduct.description;
     document.getElementById('modal-price').textContent = formatPrice(currentProduct.price);
     document.getElementById('qty-value').textContent = quantity;
    
     // Mostrar seletores de tamanho de acordo com a categoria
     const velaSection = document.getElementById('vela-weight-section');
     const spraySection = document.getElementById('homespray-size-section');
     const waxSection = document.getElementById('waxmelts-size-section');
    
     velaSection.classList.add('hidden');
     spraySection.classList.add('hidden');
     waxSection.classList.add('hidden');
    
     if (currentProduct.category === 'velas') {
       velaSection.classList.remove('hidden');
     } else if (currentProduct.category === 'homespray') {
       spraySection.classList.remove('hidden');
     } else if (currentProduct.category === 'waxmelts') {
       waxSection.classList.remove('hidden');
     }
    
     const favBtn = document.getElementById('favorite-btn');
     const isFav = favorites.has(currentProduct.id);
     favBtn.innerHTML = `
       <svg class="w-5 h-5 ${isFav ? 'text-red-500 fill-red-500' : 'text-stone-400'}" fill="${isFav ? 'currentColor' : 'none'}" stroke="currentColor" viewBox="0 0 24 24">
         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
       </svg>
     `;
    
     productModal.classList.remove('hidden');
     document.body.style.overflow = 'hidden';
   }


   function closeProductModal() {
     productModal.classList.add('hidden');
     document.body.style.overflow = '';
   }


   function addToCart(product, qty) {
     const existingItem = cart.find(item => item.id === product.id);
    
     if (existingItem) {
       existingItem.quantity += qty;
     } else {
       let displayName = product.name;
      
       // Adicionar tamanho ao nome do produto
       if (product.category === 'velas') {
         displayName = `${product.name} (${selectedVelaWeight})`;
       } else if (product.category === 'homespray') {
         displayName = `${product.name} (${selectedHomeSpraySize})`;
       } else if (product.category === 'waxmelts') {
         displayName = `${product.name} (${selectedWaxMeltsSize})`;
       }
      
       cart.push({ ...product, quantity: qty, displayName });
     }
    
     updateCartUI();
     showToast(`${product.name} adicionado ao carrinho!`);
     closeProductModal();
     openCart();
   }


   function generateWhatsAppMessage() {
     let message = ' *Pedido de Compra*\n\n';
    
     cart.forEach(item => {
       if (item.isKit) {
         message += ` *${item.name}*\n${item.kitDetails}\n ${formatPrice(item.price * item.quantity)}\n\n`;
       } else {
         const displayName = item.displayName || item.name;
         message += ` ${displayName}\n`;
         message += `   Quantidade: ${item.quantity}x\n`;
         message += `   Valor: ${formatPrice(item.price * item.quantity)}\n\n`;
       }
     });
    
     const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
     message += ` *Total: ${formatPrice(total)}*\n\n`;
     message += 'Gostaria de confirmar este pedido.';
    
     return encodeURIComponent(message);
   }


   function updateCartUI() {
     const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
     const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    
     if (totalItems > 0) {
       cartCount.textContent = totalItems;
       cartCount.classList.remove('hidden');
     } else {
       cartCount.classList.add('hidden');
     }
    
     cartSubtotal.textContent = formatPrice(subtotal);
    
     if (cart.length === 0) {
       cartItems.innerHTML = `
         <div class="flex flex-col items-center justify-center h-full text-center">
           <span class="text-6xl mb-4">üõí</span>
           <p class="text-stone-500">Seu carrinho est√° vazio</p>
           <p class="text-sm text-stone-400">Adicione produtos para continuar</p>
         </div>
       `;
     } else {
       cartItems.innerHTML = cart.map(item => `
         <div class="flex gap-4 mb-4 pb-4 border-b border-stone-100">
           <div class="w-16 h-16 product-image rounded-xl flex items-center justify-center flex-shrink-0 overflow-hidden">
             <img src="${item.imageUrl || ''}" alt="${item.name}" loading="lazy" class="w-full h-full object-cover" onerror="console.error('Image failed to load:', this.src); this.parentElement.style.background='#e5e7eb'; this.style.display='none';">
           </div>
           <div class="flex-1">
             <h4 class="font-medium text-stone-800">${item.displayName || item.name}</h4>
             <p class="text-sm text-stone-500">${formatPrice(item.price)}</p>
             <div class="flex items-center gap-2 mt-2">
               <button class="cart-qty-btn w-6 h-6 bg-stone-100 rounded-full flex items-center justify-center text-stone-600 hover:bg-stone-200 transition-colors" data-id="${item.id}" data-action="decrease">-</button>
               <span class="text-sm font-medium w-6 text-center">${item.quantity}</span>
               <button class="cart-qty-btn w-6 h-6 bg-stone-100 rounded-full flex items-center justify-center text-stone-600 hover:bg-stone-200 transition-colors" data-id="${item.id}" data-action="increase">+</button>
               <button class="cart-remove-btn ml-auto text-xs text-red-500 hover:text-red-600" data-id="${item.id}">Remover</button>
             </div>
           </div>
         </div>
       `).join('');
      
       document.querySelectorAll('.cart-qty-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const id = btn.dataset.id;              // pega como string
    const action = btn.dataset.action;      // <-- FALTAVA ISSO

    const item = cart.find(i => String(i.id) === String(id));
    if (!item) return;

    // se for kit, voc√™ decidiu n√£o alterar quantidade no carrinho
    if (item.isKit) return;

    if (action === 'increase') {
      item.quantity++;
    } else if (action === 'decrease' && item.quantity > 1) {
      item.quantity--;
    }

    updateCartUI();
  });
});

      document.querySelectorAll('.cart-remove-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const id = btn.dataset.id; // N√ÉO usa parseInt
    cart = cart.filter(i => String(i.id) !== String(id));
    updateCartUI();
    showToast('Item removido do carrinho');
  });
});

     }
    
     document.getElementById('send-whatsapp-btn').disabled = cart.length === 0;
   }


   function openCart() {
     cartModal.classList.remove('hidden');
     document.body.style.overflow = 'hidden';
     updateCartUI();
    document.getElementById('send-whatsapp-btn').addEventListener('click', (e) => {
  e.preventDefault();
  if (cart.length === 0) return; // se carrinho vazio, n√£o faz nada
  openDeliveryModal();           // abre o modal
});
 document.getElementById('close-delivery').addEventListener('click', closeDeliveryModal);
document.getElementById('cancel-delivery').addEventListener('click', closeDeliveryModal);
document.getElementById('delivery-overlay').addEventListener('click', closeDeliveryModal);
 document.getElementById('confirm-delivery').addEventListener('click', () => {
  const name = document.getElementById('delivery-name').value.trim();
  const phone = document.getElementById('delivery-phone').value.trim();
  const cep = document.getElementById('delivery-cep').value.trim();
  const number = document.getElementById('delivery-number').value.trim();
  const ref = document.getElementById('delivery-ref').value.trim();
  const notes = document.getElementById('delivery-notes').value.trim();
  // pega forma de pagamento
const payment = document.querySelector('input[name="payment_method"]:checked')?.value;

if (!payment) {
  showToast('Selecione a forma de pagamento (*)', 'error');
  return;
}

const paymentLabel = {
  pix: "Pix",
  cartao_credito: "Cart√£o de Cr√©dito (via link de pagamento + taxa da maquininha)",
  cartao_debito: "Cart√£o de D√©bito (via link de pagamento + taxa da maquininha)"
}[payment];

  // valida√ß√£o obrigat√≥ria
  if (!name || !phone || !cep || !number) {
    showToast('Preencha os campos obrigat√≥rios (*)', 'error');
    return;
  }

  // monta mensagem do pedido
  let message = decodeURIComponent(generateWhatsAppMessage());

  // adiciona dados de entrega
  message += `\n\n *Dados de Entrega*\n`;
  message += ` Nome: ${name}\n`;
  message += ` WhatsApp: ${phone}\n`;
  message += ` CEP: ${cep}\n`;
  message += ` N√∫mero: ${number}\n`;
  if (ref) message += ` Refer√™ncia: ${ref}\n`;
  if (notes) message += ` Observa√ß√µes: ${notes}\n`;
  message += `\n *Forma de Pagamento*\n`;
  message += ` ${paymentLabel}\n`;
  message += `  Pagamento √© feito via WhatsApp (n√£o pelo cat√°logo)\n`;

  const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
  window.open(whatsappUrl, '_blank');

  closeDeliveryModal();
  showToast('Abrindo WhatsApp... ');
});

}

function openDeliveryModal() {
  document.getElementById('delivery-modal').classList.remove('hidden');
  document.body.style.overflow = 'hidden'; // trava o scroll
}

function closeDeliveryModal() {
  document.getElementById('delivery-modal').classList.add('hidden');
  document.body.style.overflow = 'hidden'; 
  // mant√©m travado porque o carrinho ainda t√° aberto atr√°s
}




   function closeCart() {
     cartModal.classList.add('hidden');
     document.body.style.overflow = '';
   }


   // Category filter
   document.querySelectorAll('.category-btn').forEach(btn => {
     btn.addEventListener('click', () => {
       document.querySelectorAll('.category-btn').forEach(b => {
         b.classList.remove('active', 'bg-stone-800', 'text-white');
         b.classList.add('bg-white', 'text-stone-600');
       });
       btn.classList.add('active', 'bg-stone-800', 'text-white');
       btn.classList.remove('bg-white', 'text-stone-600');
       currentCategory = btn.dataset.category;
      
       // Show/hide kits section based on category
       const kitsSection = document.getElementById('kits-section');
       if (currentCategory === 'kits') {
         kitsSection.classList.remove('hidden');
         productsGrid.classList.add('hidden');
       } else {
         kitsSection.classList.add('hidden');
         productsGrid.classList.remove('hidden');
         renderProducts(currentCategory, searchInput.value);
       }
     });
   });


   // Search
   document.getElementById('search-btn').addEventListener('click', () => {
     searchBar.classList.toggle('hidden');
     if (!searchBar.classList.contains('hidden')) {
       searchInput.focus();
     }
   });


   searchInput.addEventListener('input', (e) => {
  const term = e.target.value.trim();
  const kitsSection = document.getElementById('kits-section');

  if (term) {
    //  Busca global: mostra resultados de TODAS as categorias
    kitsSection.classList.add('hidden');
    productsGrid.classList.remove('hidden');
    renderProducts('all', term);
  } else {
    // Voltou a ficar vazio: volta para a categoria selecionada
    if (currentCategory === 'kits') {
      kitsSection.classList.remove('hidden');
      productsGrid.classList.add('hidden');
    } else {
      kitsSection.classList.add('hidden');
      productsGrid.classList.remove('hidden');
      renderProducts(currentCategory, '');
    }
  }
});


   // Cart
   document.getElementById('cart-btn').addEventListener('click', openCart);
   document.getElementById('close-cart').addEventListener('click', (e) => {
  e.preventDefault();
  e.stopPropagation();
  e.stopImmediatePropagation();
  closeCart();
});
   document.getElementById('cart-overlay').addEventListener('click', (e) => {
  e.preventDefault();
  e.stopPropagation();
  e.stopImmediatePropagation();
  closeCart();
});



   // Favorites
   document.getElementById('favorites-btn').addEventListener('click', openFavorites);
   document.getElementById('close-favorites').addEventListener('click', closeFavorites);
   document.getElementById('favorites-overlay').addEventListener('click', closeFavorites);


   // Product modal
   document.getElementById('close-modal').addEventListener('click', closeProductModal);
   document.getElementById('modal-overlay').addEventListener('click', closeProductModal);


   document.getElementById('qty-decrease').addEventListener('click', () => {
     if (quantity > 1) {
       quantity--;
       document.getElementById('qty-value').textContent = quantity;
     }
   });


   document.getElementById('qty-increase').addEventListener('click', () => {
     quantity++;
     document.getElementById('qty-value').textContent = quantity;
   });


   document.getElementById('add-to-cart-btn').addEventListener('click', () => {
     if (currentProduct) {
       addToCart(currentProduct, quantity);
     }
   });


   document.getElementById('favorite-btn').addEventListener('click', () => {
     if (currentProduct) {
       toggleFavorite(currentProduct.id);
       const isFav = favorites.has(currentProduct.id);
       document.getElementById('favorite-btn').innerHTML = `
         <svg class="w-5 h-5 ${isFav ? 'text-red-500 fill-red-500' : 'text-stone-400'}" fill="${isFav ? 'currentColor' : 'none'}" stroke="currentColor" viewBox="0 0 24 24">
           <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
         </svg>
       `;
     }
   });


   // Size selection buttons
   document.getElementById('weight-220').addEventListener('click', () => {
     selectedVelaWeight = '220g';
   });


   document.getElementById('size-210ml').addEventListener('click', () => {
     selectedHomeSpraySize = '210ml';
   });


   document.getElementById('size-75g').addEventListener('click', () => {
     selectedWaxMeltsSize = '75g';
   });


   // WhatsApp button
  document.getElementById('send-whatsapp-btn').addEventListener('click', (e) => {
  e.preventDefault();
  if (cart.length > 0) {
    openDeliveryModal();
  function openDeliveryModal() {
  document.getElementById('delivery-modal').classList.remove('hidden');
  document.body.style.overflow = 'hidden';
}

function closeDeliveryModal() {
  document.getElementById('delivery-modal').classList.add('hidden');
  document.body.style.overflow = '';
}

// Quando clicar no bot√£o do carrinho (Enviar Pedido)
document.getElementById('send-whatsapp-btn').addEventListener('click', () => {
  if (cart.length === 0) return;
  openDeliveryModal();
});

// Fechar modal
document.getElementById('close-delivery').addEventListener('click', closeDeliveryModal);
document.getElementById('cancel-delivery').addEventListener('click', closeDeliveryModal);
document.getElementById('delivery-overlay').addEventListener('click', closeDeliveryModal);

document.getElementById('confirm-delivery').addEventListener('click', () => {
  const name = document.getElementById('delivery-name').value.trim();
  const phone = document.getElementById('delivery-phone').value.trim();
  const cep = document.getElementById('delivery-cep').value.trim();
  const number = document.getElementById('delivery-number').value.trim();
  const ref = document.getElementById('delivery-ref').value.trim();
  const notes = document.getElementById('delivery-notes').value.trim();

  // valida√ß√£o simples
  if (!name || !phone || !cep || !number) {
    showToast('Preencha os campos obrigat√≥rios (*)', 'error');
    return;
  }

  // monta mensagem do pedido (o que voc√™ j√° tem)
  let message = decodeURIComponent(generateWhatsAppMessage());

  // adiciona dados de entrega
  message += `\n\n *Dados de Entrega*\n`;
  message += ` Nome: ${name}\n`;
  message += ` WhatsApp: ${phone}\n`;
  message += ` CEP: ${cep}\n`;
  message += ` N√∫mero: ${number}\n`;
  if (ref) message += ` Refer√™ncia: ${ref}\n`;
  if (notes) message += ` Observa√ß√µes: ${notes}\n`;

  const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
  window.open(whatsappUrl, '_blank');

  closeDeliveryModal();
  showToast('Abrindo WhatsApp... ');
});

  }
});



   // Custom button
   if (document.getElementById('custom-btn')) {
     document.getElementById('custom-btn').addEventListener('click', () => {
       const message = encodeURIComponent('Ol√°!  Gostaria de solicitar um or√ßamento para velas personalizadas para um evento. Qual seria o melhor hor√°rio para conversarmos?');
       const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${message}`;
       window.open(whatsappUrl, '_blank');
     });
   }


   // Kit buttons
   document.querySelectorAll('.kit-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const kitNumber = parseInt(btn.dataset.kit);
    selectedKitImage = btn.dataset.image; //  AQUI
    openKitCustomization(kitNumber);
  });
});



   document.getElementById('close-kit-modal').addEventListener('click', closeKitModal);
   document.getElementById('kit-overlay').addEventListener('click', closeKitModal);


   function openKitCustomization(kitNumber) {
     selectedKit = kitNumber;
     const kitConfig = kitConfigs[kitNumber];
     kitCustomizations = {};


     document.getElementById('kit-title').textContent = `Personalize ${kitConfig.name}`;
     document.getElementById('kit-total-price').textContent = formatPrice(kitConfig.price);


     let html = '';
     kitConfig.items.forEach((item, index) => {
       const typeLabel = item.type === 'vela' ? 'Vela' : item.type === 'homespray' ? 'Home Spray' : 'Wax Melts';
       const quantity = item.quantity;
       const sizeLabel = item.size ? ` (${item.size})` : '';
      
       html += `
         <div class="mb-6 pb-6 border-b border-stone-100">
           <h4 class="font-medium text-stone-800 mb-3">${typeLabel}${sizeLabel} ${quantity > 1 ? `- Quantidade: ${quantity}` : ''}</h4>
       `;


       for (let i = 0; i < quantity; i++) {
         const itemKey = `${item.type}-${i}`;
        
         html += `
           <div class="mb-4 p-4 bg-stone-50 rounded-lg">
             <label class="block text-sm font-medium text-stone-700 mb-2">
               ${quantity > 1 ? `${typeLabel} ${i + 1}` : typeLabel} - Escolha o Aroma
             </label>
             <select id="kit-${itemKey}" class="kit-select w-full px-3 py-2 bg-white border border-stone-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-500" data-item-key="${itemKey}" data-type="${item.type}">
               <option value="">Selecione um aroma...</option>
               ${aromas.map(aroma => `<option value="${aroma}">${aroma}</option>`).join('')}
             </select>
           </div>
         `;
       }


       html += '</div>';
     });


     document.getElementById('kit-items-container').innerHTML = html;


     // Add event listeners to selects
     document.querySelectorAll('.kit-select').forEach(select => {
       select.addEventListener('change', (e) => {
         kitCustomizations[e.target.dataset.itemKey] = e.target.value;
       });
     });


     document.getElementById('kit-modal').classList.remove('hidden');
     document.body.style.overflow = 'hidden';
   }


   function closeKitModal() {
     document.getElementById('kit-modal').classList.add('hidden');
     document.body.style.overflow = '';
     selectedKit = null;
     kitCustomizations = {};
   }


   document.getElementById('add-kit-to-cart').addEventListener('click', () => {
     if (!selectedKit) return;


     const kitConfig = kitConfigs[selectedKit];
    
     // Check if all selections are made
     let allSelected = true;
     kitConfig.items.forEach((item, index) => {
       for (let i = 0; i < item.quantity; i++) {
         const itemKey = `${item.type}-${i}`;
         if (!kitCustomizations[itemKey]) {
           allSelected = false;
         }
       }
     });


     if (!allSelected) {
       showToast('Por favor, escolha o aroma para todos os itens', 'error');
       return;
     }


     // Build kit details message
     let kitDetails = ` ${kitConfig.name}\n`;
     kitConfig.items.forEach((item, index) => {
       for (let i = 0; i < item.quantity; i++) {
         const itemKey = `${item.type}-${i}`;
         const aroma = kitCustomizations[itemKey];
         const typeLabel = item.type === 'vela' ? `Vela ${item.size}` : item.type === 'homespray' ? 'Home Spray' : 'Wax Melts';
         kitDetails += `\n  ‚Ä¢ ${typeLabel}: ${aroma}`;
       }
     });


     // Add to cart as a special kit item
     
      const kitItem = {
  id: `kit-${selectedKit}-${Date.now()}`,
  name: kitConfig.name,
  price: kitConfig.price,
  quantity: 1,
  isKit: true,
  kitNumber: selectedKit,
  kitDetails: kitDetails,
  imageUrl: selectedKitImage //  ESSENCIAL
};



     cart.push(kitItem);
     updateCartUI();
     showToast(`${kitConfig.name} adicionado ao carrinho! `);
     closeKitModal();
     openCart();
   });


   // Element SDK
   async function onConfigChange(cfg) {
     const storeName = cfg.store_name || defaultConfig.store_name;
     const tagline = cfg.tagline || defaultConfig.tagline;
     const footerText = cfg.footer_text || defaultConfig.footer_text;
     const bannerImageUrl = cfg.banner_image_url || defaultConfig.banner_image_url;
     whatsappNumber = cfg.whatsapp_number || defaultConfig.whatsapp_number;
    
     document.getElementById('store-name').textContent = storeName;
     document.getElementById('tagline').textContent = tagline;
     document.getElementById('footer-text').textContent = footerText;
     updateBannerImage(bannerImageUrl);


     document.body.style.fontFamily = `${cfg.font_family || defaultConfig.font_family}, Jost, sans-serif`;
     document.body.style.fontSize = `${cfg.font_size || defaultConfig.font_size}px`;
    
     updateFooterLinks();
   }


   function mapToCapabilities(cfg) {
     return {
       recolorables: [
         {
           get: () => cfg.background_color || defaultConfig.background_color,
           set: (value) => { cfg.background_color = value; window.elementSdk.setConfig({ background_color: value }); }
         },
         {
           get: () => cfg.surface_color || defaultConfig.surface_color,
           set: (value) => { cfg.surface_color = value; window.elementSdk.setConfig({ surface_color: value }); }
         },
         {
           get: () => cfg.text_color || defaultConfig.text_color,
           set: (value) => { cfg.text_color = value; window.elementSdk.setConfig({ text_color: value }); }
         },
         {
           get: () => cfg.primary_action_color || defaultConfig.primary_action_color,
           set: (value) => { cfg.primary_action_color = value; window.elementSdk.setConfig({ primary_action_color: value }); }
         },
         {
           get: () => cfg.secondary_action_color || defaultConfig.secondary_action_color,
           set: (value) => { cfg.secondary_action_color = value; window.elementSdk.setConfig({ secondary_action_color: value }); }
         }
       ],
       borderables: [],
       fontEditable: {
         get: () => cfg.font_family || defaultConfig.font_family,
         set: (value) => { cfg.font_family = value; window.elementSdk.setConfig({ font_family: value }); }
       },
       fontSizeable: {
         get: () => cfg.font_size || defaultConfig.font_size,
         set: (value) => { cfg.font_size = value; window.elementSdk.setConfig({ font_size: value }); }
       }
     };
   }


   function mapToEditPanelValues(cfg) {
     return new Map([
       ["store_name", cfg.store_name || defaultConfig.store_name],
       ["tagline", cfg.tagline || defaultConfig.tagline],
       ["banner_image_url", cfg.banner_image_url || defaultConfig.banner_image_url],
       ["whatsapp_number", cfg.whatsapp_number || defaultConfig.whatsapp_number],
       ["footer_text", cfg.footer_text || defaultConfig.footer_text]
     ]);
   }



  


   // Update footer links
   function updateFooterLinks() {
     whatsappNumber = config.whatsapp_number || defaultConfig.whatsapp_number;
     const instagramProfile = config.instagram_profile || 'melaromas';
    
     document.getElementById('whatsapp-footer').textContent = ` ${whatsappNumber.replace(/(\d{2})(\d{4,5})(\d{4})/, '($1) $2-$3')}`;
     document.getElementById('instagram-link').href = `https://www.instagram.com/aromas.mel/${instagramProfile}`;
   }


   renderProducts('velas');
   updateCartUI();
   updateFooterLinks();
 </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cbe0b3c40eb23ac',t:'MTc3MDc1MjA2Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>

